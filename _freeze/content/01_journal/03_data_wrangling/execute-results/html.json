{
  "hash": "c08457c95cb24c1c7ce2fbf9e619f03d",
  "result": {
    "markdown": "---\ntitle: \"BDS Assignemtn Wrangling\"\nauthor: \"m_ahmed\"\ndate: \"2023-05-21\"\noutput: html_document\n---\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-1_a3a940c4c711f9f7e019791221c3ddac'}\n\n```{.r .cell-code}\n# Libraries\n\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n#> ✔ dplyr     1.1.2     ✔ readr     2.1.4\n#> ✔ forcats   1.0.0     ✔ stringr   1.5.0\n#> ✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n#> ✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n#> ✔ purrr     1.0.1     \n#> ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n#> ✖ dplyr::filter() masks stats::filter()\n#> ✖ dplyr::lag()    masks stats::lag()\n#> ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(vroom)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> \n#> Attaching package: 'vroom'\n#> \n#> The following objects are masked from 'package:readr':\n#> \n#>     as.col_spec, col_character, col_date, col_datetime, col_double,\n#>     col_factor, col_guess, col_integer, col_logical, col_number,\n#>     col_skip, col_time, cols, cols_condense, cols_only, date_names,\n#>     date_names_lang, date_names_langs, default_locale, fwf_cols,\n#>     fwf_empty, fwf_positions, fwf_widths, locale, output_column,\n#>     problems, spec\n```\n:::\n\n```{.r .cell-code}\nlibrary(data.table)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> \n#> Attaching package: 'data.table'\n#> \n#> The following objects are masked from 'package:lubridate':\n#> \n#>     hour, isoweek, mday, minute, month, quarter, second, wday, week,\n#>     yday, year\n#> \n#> The following objects are masked from 'package:dplyr':\n#> \n#>     between, first, last\n#> \n#> The following object is masked from 'package:purrr':\n#> \n#>     transpose\n```\n:::\n\n```{.r .cell-code}\nlibrary(lubridate)\n\n# Load the data\n\npatent_col_types <- list(\n  id         = col_character(),\n  date       = col_date(\"%Y-%m-%d\"),\n  num_claims = col_double()\n)\n\npatent_dt <- vroom(\n  file      = \"C:/Users/muhammad.ahmed/OneDrive - AERQ GmbH/Documents/TUHH Start-up Engineering/Data Science/Patent_data_reduced/patent.tsv\",\n  delim     = \"\\t\",\n  col_types = patent_col_types,\n  na        = c(\"\", \"NA\", \"NULL\")\n)\n\nsetDT(patent_dt)\n\npatent_assignee_col_types <- list(\n  patent_id   = col_character(),\n  assignee_id = col_character()\n)\n\npatent_assignee_dt <- vroom(\n  file      = \"C:/Users/muhammad.ahmed/OneDrive - AERQ GmbH/Documents/TUHH Start-up Engineering/Data Science/Patent_data_reduced/patent_assignee.tsv\",\n  delim     = \"\\t\",\n  col_types = patent_assignee_col_types,\n  na        = c(\"\", \"NA\", \"NULL\")\n)\n\nsetDT(patent_assignee_dt)\n\nassignee_col_types <- list(\n  id           = col_character(),\n  type         = col_character(),\n  organization = col_character()\n)\n\nassignee_dt <- vroom(\n  file      = \"C:/Users/muhammad.ahmed/OneDrive - AERQ GmbH/Documents/TUHH Start-up Engineering/Data Science/Patent_data_reduced/assignee.tsv\",\n  delim     = \"\\t\",\n  col_types = assignee_col_types,\n  na        = c(\"\", \"NA\", \"NULL\")\n)\n\nsetDT(assignee_dt)\n\nuspc_col_types <- list(\n  patent_id = col_character(),\n  mainclass_id = col_character(),\n  sequence = col_double()\n)\n\nuspc_dt <- vroom(\n  file      = \"C:/Users/muhammad.ahmed/OneDrive - AERQ GmbH/Documents/TUHH Start-up Engineering/Data Science/Patent_data_reduced/uspc.tsv\",\n  delim     = \"\\t\",\n  col_types = uspc_col_types,\n  na        = c(\"\", \"NA\", \"NULL\")\n)\n\nsetDT(uspc_dt)\n\n\n# Question 1\n# Sol to question 1\n\nus_top_10_companies_dt <- merge(x = patent_assignee_dt, y = assignee_dt, by.x = \"assignee_id\", by.y = \"id\")[\n  type == 2 & (!is.na(patent_id) | !is.na(organization)), ][\n    , .(count = .N), by = organization\n  ][order(-count), ][1:10,][]\n\nus_top_10_companies_dt\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"organization\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"count\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"International Business Machines Corporation\",\"2\":\"7547\"},{\"1\":\"Microsoft Corporation\",\"2\":\"3165\"},{\"1\":\"Google Inc.\",\"2\":\"2668\"},{\"1\":\"QUALCOMM Incorporated\",\"2\":\"2597\"},{\"1\":\"Apple Inc.\",\"2\":\"2201\"},{\"1\":\"General Electric Company\",\"2\":\"1873\"},{\"1\":\"Hewlett-Packard Development Company, L.P.\",\"2\":\"1638\"},{\"1\":\"AT&T INTELLECTUAL PROPERTY I, L.P.\",\"2\":\"1625\"},{\"1\":\"Intel Corporation\",\"2\":\"1616\"},{\"1\":\"GM Global Technology Operations LLC\",\"2\":\"1533\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n# Sol to question 2\n\nus_top_10_new_august <- merge(x = patent_dt, y = patent_assignee_dt, by.x = \"id\", by.y = \"patent_id\")[\n  assignee_dt, on = c(assignee_id = \"id\")\n][type == 2,][\n  !is.na(id) | !is.na(organization),][, month := month(ymd(date))][month == 8, ][\n    , .(count = .N), by = organization\n  ][order(-count), ][1:10,][]\n\nus_top_10_new_august\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"organization\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"count\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"International Business Machines Corporation\",\"2\":\"718\"},{\"1\":\"Microsoft Corporation\",\"2\":\"337\"},{\"1\":\"Google Inc.\",\"2\":\"240\"},{\"1\":\"QUALCOMM Incorporated\",\"2\":\"223\"},{\"1\":\"Apple Inc.\",\"2\":\"222\"},{\"1\":\"Intel Corporation\",\"2\":\"159\"},{\"1\":\"General Electric Company\",\"2\":\"148\"},{\"1\":\"AT&T INTELLECTUAL PROPERTY I, L.P.\",\"2\":\"146\"},{\"1\":\"Hewlett-Packard Development Company, L.P.\",\"2\":\"140\"},{\"1\":\"GM Global Technology Operations LLC\",\"2\":\"138\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\n# Sol to question 3\n\ntop_10_worldwide <- merge(x = patent_assignee_dt, y = assignee_dt, by.x = \"assignee_id\", by.y = \"id\")[\n  !is.na(patent_id) | !is.na(organization),][, .(count = .N), by = organization][order(-count),][\n    !is.na(organization),][1:10,][]\n\ntop_10_worldwide\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"organization\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"count\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"International Business Machines Corporation\",\"2\":\"7547\"},{\"1\":\"Samsung Electronics Co., Ltd.\",\"2\":\"5835\"},{\"1\":\"Canon Kabushiki Kaisha\",\"2\":\"4099\"},{\"1\":\"Sony Corporation\",\"2\":\"3326\"},{\"1\":\"Microsoft Corporation\",\"2\":\"3165\"},{\"1\":\"Google Inc.\",\"2\":\"2668\"},{\"1\":\"Kabushiki Kaisha Toshiba\",\"2\":\"2656\"},{\"1\":\"QUALCOMM Incorporated\",\"2\":\"2597\"},{\"1\":\"LG Electronics Inc.\",\"2\":\"2459\"},{\"1\":\"Panasonic Corporation\",\"2\":\"2218\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\ntop_5_uspto <- merge(x = uspc_dt, y = patent_assignee_dt, by = \"patent_id\")[\n  assignee_dt, on = c(assignee_id = \"id\")][top_10_worldwide, on = \"organization\"][\n    , .(count = .N), by = mainclass_id][order(-count),][1:5,][]\n\ntop_5_uspto\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"mainclass_id\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"count\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"257\",\"2\":\"7979\"},{\"1\":\"455\",\"2\":\"6191\"},{\"1\":\"370\",\"2\":\"5483\"},{\"1\":\"348\",\"2\":\"4113\"},{\"1\":\"709\",\"2\":\"4018\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}